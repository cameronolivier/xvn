#!/bin/sh

# Wrapper script for xvn npm package

# Find the native binary (resolve symlinks)
SCRIPT="$0"
while [ -L "$SCRIPT" ]; do
  SCRIPT_DIR="$(cd "$(dirname "$SCRIPT")" && pwd)"
  SCRIPT="$(readlink "$SCRIPT")"
  [[ "$SCRIPT" != /* ]] && SCRIPT="$SCRIPT_DIR/$SCRIPT"
done
SCRIPT_DIR="$(cd "$(dirname "$SCRIPT")" && pwd)"
NATIVE_BINARY="$SCRIPT_DIR/../native/xvn"

if [ ! -f "$NATIVE_BINARY" ]; then
  echo "Error: xvn binary not found at $NATIVE_BINARY"
  echo "Please try reinstalling: npm install -g @olvrcc/xvn"
  exit 1
fi

# Execute the native binary
exec "$NATIVE_BINARY" "$@"
